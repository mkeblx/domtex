<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>test</title>
<style>
#container {
  border: 2px solid black;
  padding: 5px;
  min-width: 10px;
  min-height: 10px;
  display: inline-block;
}
</style>
</head>
<body>
  <h1>Image map test</h1>

  <div id="container">
    <img id="img" src="/output/003e6fc95c60.png" usemap="#links-map" />

    <map name="links-map" id="linksmap">
    </map>
  </div>

<script>
var json = '{"path":"output/003e6fc95c60.png","url":"https://news.ycombinator.com","width":512,"height":512,"links":[{"href":"https://news.ycombinator.com","x":2,"y":18,"width":20,"height":16},{"href":"news","x":31,"y":4,"width":110,"height":18},{"href":"newest","x":31,"y":21,"width":25,"height":15},{"href":"newcomments","x":69,"y":21,"width":63,"height":15},{"href":"show","x":145,"y":21,"width":31,"height":15},{"href":"ask","x":190,"y":21,"width":20,"height":15},{"href":"jobs","x":225,"y":21,"width":25,"height":15},{"href":"submit","x":264,"y":21,"width":41,"height":15},{"href":"login?goto=news","x":472,"y":13,"width":29,"height":15},{"href":"vote?id=16372234&how=up&goto=news","x":24,"y":55,"width":18,"height":10},{"href":"https://techcrunch.com/2018/02/13/amp-for-email-is-a-terrible-idea/","x":42,"y":53,"width":226,"height":18},{"href":"from?site=techcrunch.com","x":276,"y":57,"width":85,"height":13},{"href":"user?id=coloneltcb","x":128,"y":74,"width":60,"height":15},{"href":"item?id=16372234","x":193,"y":74,"width":65,"height":15},{"href":"hide?id=16372234&goto=news","x":273,"y":74,"width":26,"height":15},{"href":"item?id=16372234","x":312,"y":74,"width":83,"height":15},{"href":"vote?id=16370049&how=up&goto=news","x":24,"y":97,"width":18,"height":10},{"href":"https://blog.torproject.org/italian-anti-corruption-authority-anac-adopts-onion-services","x":42,"y":94,"width":410,"height":18},{"href":"from?site=torproject.org","x":46,"y":114,"width":74,"height":13},{"href":"user?id=jakobdabo","x":128,"y":130,"width":62,"height":15},{"href":"item?id=16370049","x":195,"y":130,"width":71,"height":15},{"href":"hide?id=16370049&goto=news","x":281,"y":130,"width":26,"height":15},{"href":"item?id=16370049","x":320,"y":130,"width":82,"height":15},{"href":"vote?id=16372375&how=up&goto=news","x":24,"y":153,"width":18,"height":10},{"href":"https://github.com/photonstorm/phaser","x":42,"y":151,"width":307,"height":18},{"href":"from?site=github.com","x":357,"y":155,"width":61,"height":13},{"href":"user?id=johnhattan","x":121,"y":172,"width":66,"height":15},{"href":"item?id=16372375","x":190,"y":172,"width":66,"height":15},{"href":"hide?id=16372375&goto=news","x":270,"y":172,"width":26,"height":15},{"href":"item?id=16372375","x":309,"y":172,"width":74,"height":15},{"href":"vote?id=16372312&how=up&goto=news","x":24,"y":195,"width":18,"height":10},{"href":"https://www.bloomberg.com/news/articles/2018-02-13/chipotle-taps-taco-bell-ceo-as-new-leader-in-major-culture-shift","x":42,"y":193,"width":356,"height":18},{"href":"from?site=bloomberg.com","x":406,"y":197,"width":84,"height":13},{"href":"user?id=fludlight","x":121,"y":214,"width":49,"height":15},{"href":"item?id=16372312","x":174,"y":214,"width":66,"height":15},{"href":"hide?id=16372312&goto=news","x":253,"y":214,"width":25,"height":15},{"href":"item?id=16372312","x":293,"y":214,"width":75,"height":15},{"href":"vote?id=16369994&how=up&goto=news","x":24,"y":237,"width":18,"height":10},{"href":"https://medium.com/sketchdeck-developer-blog/what-i-wish-i-knew-when-i-became-cto-fdc934b790e3","x":42,"y":235,"width":297,"height":18},{"href":"from?site=medium.com","x":347,"y":239,"width":69,"height":13},{"href":"user?id=edmack","x":128,"y":256,"width":47,"height":15},{"href":"item?id=16369994","x":179,"y":256,"width":72,"height":15},{"href":"hide?id=16369994&goto=news","x":265,"y":256,"width":25,"height":15},{"href":"item?id=16369994","x":304,"y":256,"width":82,"height":15},{"href":"vote?id=16362574&how=up&goto=news","x":24,"y":279,"width":18,"height":10},{"href":"https://medium.com/@MartinCracauer/llvms-garbage-collection-facilities-and-sbcl-s-generational-gc-a13eedfb1b31","x":42,"y":276,"width":439,"height":36},{"href":"from?site=medium.com","x":72,"y":298,"width":70,"height":13},{"href":"user?id=lispm","x":121,"y":314,"width":32,"height":15},{"href":"item?id=16362574","x":157,"y":314,"width":72,"height":15},{"href":"hide?id=16362574&goto=news","x":243,"y":314,"width":26,"height":15},{"href":"item?id=16362574","x":282,"y":314,"width":69,"height":15},{"href":"vote?id=16371964&how=up&goto=news","x":24,"y":337,"width":18,"height":10},{"href":"https://www.twilio.com/blog/2017/10/http2-issues.html","x":42,"y":335,"width":360,"height":18},{"href":"from?site=twilio.com","x":410,"y":339,"width":54,"height":13},{"href":"user?id=gregorymichael","x":121,"y":356,"width":93,"height":15},{"href":"item?id=16371964","x":218,"y":356,"width":71,"height":15},{"href":"hide?id=16371964&goto=news","x":304,"y":356,"width":26,"height":15},{"href":"item?id=16371964","x":343,"y":356,"width":74,"height":15},{"href":"vote?id=16371785&how=up&goto=news","x":24,"y":379,"width":18,"height":10},{"href":"https://www.bloomberg.com/news/articles/2018-02-13/uber-sales-reach-7-5-billion-in-2017-despite-persistent-turmoil","x":42,"y":376,"width":438,"height":18},{"href":"from?site=bloomberg.com","x":46,"y":396,"width":83,"height":13},{"href":"user?id=tmh79","x":121,"y":412,"width":39,"height":15},{"href":"item?id=16371785","x":164,"y":412,"width":71,"height":15},{"href":"hide?id=16371785&goto=news","x":250,"y":412,"width":26,"height":15},{"href":"item?id=16371785","x":289,"y":412,"width":82,"height":15},{"href":"item?id=16372700","x":42,"y":432,"width":410,"height":36},{"href":"item?id=16372700","x":42,"y":468,"width":94,"height":15},{"href":"hide?id=16372700&goto=news","x":149,"y":468,"width":25,"height":15},{"href":"vote?id=16367626&how=up&goto=news","x":24,"y":491,"width":18,"height":10},{"href":"https://www.scientificamerican.com/article/the-case-for-the-ldquo-self-driven-child-rdquo/","x":42,"y":489,"width":265,"height":18},{"href":"from?site=scientificamerican.com","x":315,"y":493,"width":122,"height":13},{"href":"user?id=artsandsci","x":128,"y":510,"width":61,"height":15},{"href":"item?id=16367626","x":194,"y":510,"width":80,"height":15},{"href":"hide?id=16367626&goto=news","x":287,"y":510,"width":25,"height":15},{"href":"item?id=16367626","x":327,"y":510,"width":90,"height":15},{"href":"vote?id=16368653&how=up&goto=news","x":24,"y":533,"width":18,"height":10},{"href":"https://modeldepot.io/","x":42,"y":530,"width":404,"height":36},{"href":"from?site=modeldepot.io","x":114,"y":552,"width":77,"height":13},{"href":"user?id=hsikka","x":128,"y":568,"width":38,"height":15},{"href":"item?id=16368653","x":171,"y":568,"width":71,"height":15},{"href":"hide?id=16368653&goto=news","x":257,"y":568,"width":26,"height":15},{"href":"item?id=16368653","x":296,"y":568,"width":82,"height":15},{"href":"vote?id=16369937&how=up&goto=news","x":24,"y":591,"width":18,"height":10},{"href":"https://spectrum.ieee.org/automaton/robotics/drones/cleo-robotics-demonstrates-uniquely-clever-ducted-fan-drone","x":42,"y":588,"width":417,"height":36},{"href":"from?site=ieee.org","x":95,"y":610,"width":44,"height":13},{"href":"user?id=jonbaer","x":121,"y":626,"width":46,"height":15},{"href":"item?id=16369937","x":171,"y":626,"width":72,"height":15},{"href":"hide?id=16369937&goto=news","x":257,"y":626,"width":26,"height":15},{"href":"item?id=16369937","x":296,"y":626,"width":82,"height":15},{"href":"vote?id=16353086&how=up&goto=news","x":24,"y":649,"width":18,"height":10},{"href":"https://www.theguardian.com/environment/2018/feb/11/poison-pass-the-man-who-became-immune-to-snake-venom-steve-ludwin","x":42,"y":647,"width":333,"height":18},{"href":"from?site=theguardian.com","x":383,"y":651,"width":91,"height":13},{"href":"user?id=pmoriarty","x":121,"y":668,"width":59,"height":15},{"href":"item?id=16353086","x":184,"y":668,"width":72,"height":15},{"href":"hide?id=16353086&goto=news","x":270,"y":668,"width":26,"height":15},{"href":"item?id=16353086","x":309,"y":668,"width":75,"height":15},{"href":"vote?id=16367457&how=up&goto=news","x":24,"y":691,"width":18,"height":10},{"href":"https://www.blog.google/products/chrome/browser-web-worth-protecting/","x":42,"y":688,"width":461,"height":36},{"href":"from?site=blog.google","x":123,"y":710,"width":62,"height":13},{"href":"user?id=kevincennis","x":128,"y":726,"width":70,"height":15},{"href":"item?id=16367457","x":203,"y":726,"width":80,"height":15},{"href":"hide?id=16367457&goto=news","x":296,"y":726,"width":25,"height":15},{"href":"item?id=16367457","x":336,"y":726,"width":90,"height":15},{"href":"vote?id=16369280&how=up&goto=news","x":24,"y":749,"width":18,"height":10},{"href":"http://blog.interviewing.io/we-looked-at-how-a-thousand-college-students-performed-in-technical-interviews-to-see-if-where-they-went-to-school-mattered-it-didnt/","x":42,"y":746,"width":444,"height":36},{"href":"from?site=interviewing.io","x":196,"y":768,"width":79,"height":13},{"href":"user?id=leeny","x":121,"y":784,"width":32,"height":15},{"href":"item?id=16369280","x":157,"y":784,"width":71,"height":15},{"href":"hide?id=16369280&goto=news","x":243,"y":784,"width":26,"height":15},{"href":"item?id=16369280","x":282,"y":784,"width":82,"height":15},{"href":"vote?id=16370896&how=up&goto=news","x":24,"y":807,"width":18,"height":10},{"href":"https://dig1000holes.wordpress.com/2018/02/07/the-game-designers-calculator/","x":42,"y":805,"width":236,"height":18},{"href":"from?site=dig1000holes.wordpress.com","x":286,"y":809,"width":156,"height":13},{"href":"user?id=akkartik","x":121,"y":826,"width":49,"height":15},{"href":"item?id=16370896","x":174,"y":826,"width":72,"height":15},{"href":"hide?id=16370896&goto=news","x":259,"y":826,"width":25,"height":15},{"href":"item?id=16370896","x":299,"y":826,"width":82,"height":15},{"href":"vote?id=16370941&how=up&goto=news","x":24,"y":849,"width":18,"height":10},{"href":"http://catless.ncl.ac.uk/Risks/","x":42,"y":847,"width":122,"height":18},{"href":"from?site=ncl.ac.uk","x":172,"y":851,"width":48,"height":13},{"href":"user?id=nz","x":113,"y":868,"width":14,"height":15},{"href":"item?id=16370941","x":131,"y":868,"width":65,"height":15},{"href":"hide?id=16370941&goto=news","x":211,"y":868,"width":26,"height":15},{"href":"item?id=16370941","x":250,"y":868,"width":44,"height":15},{"href":"vote?id=16369089&how=up&goto=news","x":24,"y":891,"width":18,"height":10},{"href":"https://www.eetimes.com/document.asp?doc_id=1332959","x":42,"y":889,"width":356,"height":18},{"href":"from?site=eetimes.com","x":406,"y":893,"width":68,"height":13},{"href":"user?id=bcaulfield","x":121,"y":910,"width":57,"height":15},{"href":"item?id=16369089","x":182,"y":910,"width":71,"height":15},{"href":"hide?id=16369089&goto=news","x":268,"y":910,"width":26,"height":15},{"href":"item?id=16369089","x":307,"y":910,"width":82,"height":15},{"href":"vote?id=16371508&how=up&goto=news","x":24,"y":933,"width":18,"height":10},{"href":"https://blog.bradfieldcs.com/the-cost-of-forsaking-c-113986438784","x":42,"y":931,"width":170,"height":18},{"href":"from?site=bradfieldcs.com","x":220,"y":935,"width":85,"height":13},{"href":"user?id=zik","x":128,"y":952,"width":16,"height":15},{"href":"item?id=16371508","x":149,"y":952,"width":72,"height":15},{"href":"hide?id=16371508&goto=news","x":235,"y":952,"width":26,"height":15},{"href":"item?id=16371508","x":274,"y":952,"width":82,"height":15},{"href":"vote?id=16371030&how=up&goto=news","x":24,"y":975,"width":18,"height":10},{"href":"https://gist.github.com/joepie91/5a9909939e6ce7d09e29","x":42,"y":973,"width":169,"height":18},{"href":"from?site=github.com","x":220,"y":977,"width":60,"height":13},{"href":"user?id=miles","x":128,"y":994,"width":31,"height":15},{"href":"item?id=16371030","x":164,"y":994,"width":71,"height":15},{"href":"hide?id=16371030&goto=news","x":250,"y":994,"width":26,"height":15},{"href":"item?id=16371030","x":289,"y":994,"width":89,"height":15},{"href":"vote?id=16367715&how=up&goto=news","x":24,"y":1017,"width":18,"height":10},{"href":"https://procedur.al/","x":42,"y":1014,"width":448,"height":36},{"href":"from?site=procedur.al","x":105,"y":1036,"width":61,"height":13},{"href":"user?id=heycesr","x":121,"y":1052,"width":47,"height":15},{"href":"item?id=16367715","x":171,"y":1052,"width":72,"height":15},{"href":"hide?id=16367715&goto=news","x":257,"y":1052,"width":25,"height":15},{"href":"item?id=16367715","x":297,"y":1052,"width":82,"height":15},{"href":"vote?id=16371378&how=up&goto=news","x":24,"y":1075,"width":18,"height":10},{"href":"https://badge.design/","x":42,"y":1073,"width":231,"height":18},{"href":"from?site=badge.design","x":281,"y":1077,"width":71,"height":13},{"href":"user?id=aheppy","x":113,"y":1094,"width":44,"height":15},{"href":"item?id=16371378","x":161,"y":1094,"width":65,"height":15},{"href":"hide?id=16371378&goto=news","x":241,"y":1094,"width":26,"height":15},{"href":"item?id=16371378","x":280,"y":1094,"width":68,"height":15},{"href":"vote?id=16367600&how=up&goto=news","x":24,"y":1117,"width":18,"height":10},{"href":"https://blog.canny.io/saas-pricing-lessons/","x":42,"y":1115,"width":270,"height":18},{"href":"from?site=canny.io","x":320,"y":1119,"width":45,"height":13},{"href":"user?id=a13n","x":128,"y":1136,"width":30,"height":15},{"href":"item?id=16367600","x":163,"y":1136,"width":80,"height":15},{"href":"hide?id=16367600&goto=news","x":256,"y":1136,"width":26,"height":15},{"href":"item?id=16367600","x":295,"y":1136,"width":82,"height":15},{"href":"vote?id=16371874&how=up&goto=news","x":24,"y":1159,"width":18,"height":10},{"href":"https://twitter.com/Sam0711er/status/958793819495059460","x":42,"y":1156,"width":462,"height":36},{"href":"from?site=twitter.com","x":170,"y":1178,"width":61,"height":13},{"href":"user?id=JamieF1","x":121,"y":1194,"width":49,"height":15},{"href":"item?id=16371874","x":174,"y":1194,"width":72,"height":15},{"href":"hide?id=16371874&goto=news","x":260,"y":1194,"width":26,"height":15},{"href":"item?id=16371874","x":299,"y":1194,"width":82,"height":15},{"href":"vote?id=16371211&how=up&goto=news","x":24,"y":1217,"width":18,"height":10},{"href":"http://nautil.us/issue/15/turbulence/your-brain-is-on-the-brink-of-chaos","x":42,"y":1214,"width":459,"height":18},{"href":"from?site=nautil.us","x":46,"y":1234,"width":46,"height":13},{"href":"user?id=dnetesn","x":121,"y":1250,"width":48,"height":15},{"href":"item?id=16371211","x":173,"y":1250,"width":72,"height":15},{"href":"hide?id=16371211&goto=news","x":259,"y":1250,"width":26,"height":15},{"href":"item?id=16371211","x":298,"y":1250,"width":75,"height":15},{"href":"vote?id=16367552&how=up&goto=news","x":24,"y":1273,"width":18,"height":10},{"href":"http://storm-country.com/blog/evo-deco","x":42,"y":1271,"width":164,"height":18},{"href":"from?site=storm-country.com","x":214,"y":1275,"width":102,"height":13},{"href":"user?id=jsnell","x":121,"y":1292,"width":32,"height":15},{"href":"item?id=16367552","x":157,"y":1292,"width":72,"height":15},{"href":"hide?id=16367552&goto=news","x":242,"y":1292,"width":25,"height":15},{"href":"item?id=16367552","x":282,"y":1292,"width":82,"height":15},{"href":"vote?id=16370647&how=up&goto=news","x":24,"y":1315,"width":18,"height":10},{"href":"http://www.collaborativefund.com/blog/sustainable-sources-of-competitive-advantage/","x":42,"y":1312,"width":345,"height":18},{"href":"from?site=collaborativefund.com","x":46,"y":1332,"width":118,"height":13},{"href":"user?id=joeyespo","x":121,"y":1348,"width":54,"height":15},{"href":"item?id=16370647","x":179,"y":1348,"width":72,"height":15},{"href":"hide?id=16370647&goto=news","x":264,"y":1348,"width":25,"height":15},{"href":"item?id=16370647","x":304,"y":1348,"width":75,"height":15},{"href":"vote?id=16369977&how=up&goto=news","x":24,"y":1371,"width":18,"height":10},{"href":"https://www.theverge.com/2018/2/13/17007376/axon-taser-monopoly-digital-ally-wireless","x":42,"y":1368,"width":449,"height":18},{"href":"from?site=theverge.com","x":46,"y":1388,"width":74,"height":13},{"href":"user?id=IntronExon","x":113,"y":1404,"width":67,"height":15},{"href":"item?id=16369977","x":184,"y":1404,"width":72,"height":15},{"href":"hide?id=16369977&goto=news","x":270,"y":1404,"width":26,"height":15},{"href":"item?id=16369977","x":309,"y":1404,"width":74,"height":15},{"href":"vote?id=16372000&how=up&goto=news","x":24,"y":1427,"width":18,"height":10},{"href":"https://qz.com/1195354/tech-salaries-in-austin-texas-are-effectively-66000-higher-than-in-nyc-thanks-to-the-cost-of-living/","x":42,"y":1424,"width":448,"height":36},{"href":"from?site=qz.com","x":144,"y":1446,"width":39,"height":13},{"href":"user?id=dangrover","x":121,"y":1462,"width":62,"height":15},{"href":"item?id=16372000","x":186,"y":1462,"width":72,"height":15},{"href":"hide?id=16372000&goto=news","x":272,"y":1462,"width":25,"height":15},{"href":"item?id=16372000","x":311,"y":1462,"width":82,"height":15},{"href":"vote?id=16370104&how=up&goto=news","x":24,"y":1485,"width":18,"height":10},{"href":"https://www.outsideonline.com/2280216/lower-bar","x":42,"y":1483,"width":302,"height":18},{"href":"from?site=outsideonline.com","x":352,"y":1487,"width":97,"height":13},{"href":"user?id=hprotagonist","x":121,"y":1504,"width":76,"height":15},{"href":"item?id=16370104","x":201,"y":1504,"width":72,"height":15},{"href":"hide?id=16370104&goto=news","x":287,"y":1504,"width":26,"height":15},{"href":"item?id=16370104","x":326,"y":1504,"width":44,"height":15},{"href":"news?p=2","x":42,"y":1534,"width":36,"height":18},{"href":"https://www.ycombinator.com/apply/","x":111,"y":1580,"width":290,"height":16},{"href":"newsguidelines.html","x":20,"y":1612,"width":55,"height":13},{"href":"newsfaq.html","x":88,"y":1612,"width":22,"height":13},{"href":"mailto:hn@ycombinator.com","x":122,"y":1612,"width":43,"height":13},{"href":"https://github.com/HackerNews/API","x":177,"y":1612,"width":18,"height":13},{"href":"security.html","x":207,"y":1612,"width":44,"height":13},{"href":"lists","x":263,"y":1612,"width":24,"height":13},{"href":"bookmarklet.html","x":300,"y":1612,"width":68,"height":13},{"href":"http://www.ycombinator.com/legal","x":380,"y":1612,"width":29,"height":13},{"href":"http://www.ycombinator.com/apply","x":420,"y":1612,"width":62,"height":13},{"href":"mailto:hn@ycombinator.com","x":235,"y":1625,"width":42,"height":13}]}';
</script>
<script>
'use strict';

var site = 'https://news.ycombinator.com';

var container = document.getElementById('container');
var img = document.getElementById('img');
var map = document.getElementById('linksmap');

var resp = JSON.parse(json);
console.log(resp);

var w = resp.width;
var h = resp.height;

var links = resp.links;

for (var i = 0; i < links.length; i++) {
  var link = links[i];
  var href = link.href;
  if (!href.startsWith('http') && !href.startsWith('mailto'))
    href = site + '/' + href; // TODO: don't always want to add slash unless bare domain
  //console.log(href);

  if (link.x > w || link.y > h)
    continue;

  var coords = [link.x, link.y, Math.min(link.x+link.width, w), Math.min(link.y+link.height, h)];

  var areaEl = document.createElement('area');
  console.log(areaEl);
  areaEl.setAttribute('shape', 'rect');
  areaEl.setAttribute('coords', coords.join(','));
  areaEl.setAttribute('href', href);
  map.appendChild(areaEl);
}
</script>
</body>
</html>